---
layout: post
title: "[Spring] 파일 업로드 처리"
subtitle: "이미지, 파일 등의 파일 업로드 처리"
comments: true
date: 2020-03-04
background: '/img/posts/01.jpg'
---

<h2 class="section-heading">파일 업로드 처리</h2>

<p>첨부파일을 서버에 전송하는 방식은 크게 from 태그를 이용해서 업로드하는 
방식과 Ajax를 이용하는 방식으로 나눌수 있다.</p>

<p><u>1. form 태그를 이용하는 방식: 브라우저 제한이 없어야 하는 경우에 사용</u></p>
<p>일반적으로 페이지 이동과 동시에 첨부파일을 업로드하는 방식, iframe을 이용해서 화면 이동 없이 첨부파일 처리하는 방식</p>
<p><u>2. Ajax를 이용하는 방식: 첨부파일을 별도로 처리하는 방식</u></p>
<p>input type="file"을 이용하여 ajax로 처리하는 방식, HTML5 의 Drag And Drop 기능이나 jQuery 라이브러리를 이용해서 처리하는 방식</p>

<h3>서버에서 첨부파일을 처리하는 방식</h3>
<p>1) cos.jar: 2002년도 이후에 개발이 종료 되었으며, 더이상 사용하지 않는 것을 권장함</p>
<p>2) commons-fileupload: 가장 일반적으로 많이 활용되고, 서블릿 스펙 3.0 이전에도 사용가능 </p>
<p>3) 서블릿 3.0 이상 - 3.0 이상부터는 자체적인 파일 업로드 처리가 API 상에서 지원</p>

<h3>스프링의 첨부파일을 위한 설정</h3>
<p><b>1. web.xml 을 이용하는 경우의 첨부파일 설정</b></p>
<p>서블릿 3.0 이상을 설정하는 경우 XML 네임스페이스 버전 설정 변</p>

<p><b>2. java 설정을 이용하는 경우</b></p>

<h3>form 태그 방식의 파일 업로드</h3>
<p><u>파일을 업로드 할때 form 태그에 ENCTYPE="multipart/form-data"라는 애트리뷰트를 반드시 써야 한다.(전송되는 데이터 형식을 설정하는 역할)</u></p>
<p>그렇게 하지 않으면 웹 서버로 데이터를 넘길때 파일의 경로명만 전송되고 파일 내용이 전송되지 않는다!</p>
<p>또한, Method 애트리뷰트는 POST 값으로 지정해야 한다.</p>
<p><b>enctype 속성은 다음 세가지의 값으로 지정할 수 있다.</b></p>
<p>1. application/www-form-urlencoded</p>
디폴트값이다. enctype을 따로 설정하지 않으면 이 값이 설정된다. 폼 데이터는
서버로 전송되기 전에 URL-Encode 된다.
<p>2. multipart/form-data</p>
파일이나 이미지를 서버로 전송할 경우 이방식을 사용한다.
<p>3. text/plain</p>
이 형식은 인코딩을 하지 않은 문자 상태로 전송한다.
<br/><br/>
<img width="600" alt="스크린샷 2020-03-05 오후 10 14 41" src="https://user-images.githubusercontent.com/26623547/75985024-dc74d500-5f2e-11ea-84d6-c67e09b8809b.png">
<br/>
<p><u>위처럼 multiple 을 추가해줌으로써 여러 파일을 한번에 전송 가능하다</u></p>






